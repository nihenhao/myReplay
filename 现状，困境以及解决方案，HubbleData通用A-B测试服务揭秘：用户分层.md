
# 现状，困境以及解决方案，HubbleData通用A/B测试服务揭秘：用户分层

用户分层首先由谷歌提出并实践，主要解决大规模A/B测试过程中实验流量不足的问题。我们在立项之初同样引入分层功能，不过发现很多用户仍然对这个概念有疑问，接下来我将从产品的角度来解读用户分层的概念，功能以及我们的设计。

介入这个问题之前首先对A/B测试的概念进行解读，广义上来说A/B测试属于对照试验的一种。对照实验一般是指进行某种试验以阐明一定因素对一个对象的影响和处理效应或意义时，除了对试验所要求研究因素或操作处理外，其他因素都保持一致，并把试验结果进行比较的试验。[百度百科](https://baike.baidu.com/item/%E5%AF%B9%E7%85%A7%E5%AE%9E%E9%AA%8C)。关键词：**其他因素保持一致**，转化成A/B测试术语：**同一时段同一用户仅能参与一个实验**

## 业务场景
科学的实验设计首先需要同一用户仅受单一元素的影响，举例如验证官网的CTA文案对用户的影响设计如下
![官网改版](/Users/yang/Desktop/myReplay/图片.png)
按照实验的科学性原则，同一用户不可以继续参与其他实验。如果此时选择60%的实验流量，同一产品仅能对剩余的40%流量测试其他内容。那么随着产品的增长以及团队的扩大，产品必然面临实验流量不足的限制，而且受限于实验流量的限制，我们没办法实现实验的上线（100%用户）。这种限制从科学性上来说非常必要，但是具体到实际业务场景中有没有办法适度放宽约束呢？应该说思路还是比较明确的：

1. 放宽实验变量的范围，将多个变量的组合值作为一组实验。举例如同时测试按钮的颜色与文字，找到最佳组合。这种设计对应实验中多变量测试，通过多个变量不同组合来确定最优的数据组合。
2. 放宽实验流量互斥的限制，允许同一个用户同时参与多个实验。
3. https://mailyxpublic.nosdn.127.net/15350933624887259.jpg